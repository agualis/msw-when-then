(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{64:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return l}));var r=n(2),a=n(6),i=(n(0),n(78)),s={id:"features_request-assertions",title:"Assert Request Data",slug:"/features/request-assertions"},o={unversionedId:"features_request-assertions",id:"features_request-assertions",isDocsHomePage:!1,title:"Assert Request Data",description:"MSW provides a great way to test api calls without getting stuck in implementation details.",source:"@site/docs/features_request-assertions.md",slug:"/features/request-assertions",permalink:"/msw-when-then/docs/features/request-assertions",editUrl:"https://github.com/redhwannacef/msw-when-then/edit/master/docs/docs/features_request-assertions.md",version:"current",sidebar:"someSidebar",previous:{title:"Custom Resolvers",permalink:"/msw-when-then/docs/features/custom-resolvers"},next:{title:"whenThen",permalink:"/msw-when-then/docs/api/when-then"}},c=[{value:"Example",id:"example",children:[]}],u={rightToc:c};function l(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"MSW")," provides a great way to test api calls without getting stuck in implementation details.\nOne thing however that is missing is the ability to assert on request data. This can be done in a custom resolver,\nbut we think it is important enough we have made it a first class citizen."),Object(i.b)("p",null,"One way to think of this is by asking the question:"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"If I change the logic in a certain part of the application, should my tests fail?")),Object(i.b)("p",null,"Usually the answer is yes.\nSo tying this back, if we were to change the transformation logic that outputs the data so that the wrong data is accidentally\nsent as part of the api call, should the test fail? We think it should."),Object(i.b)("h2",{id:"example"},"Example"),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"Note: The ",Object(i.b)("inlineCode",{parentName:"em"},"id")," key in the ",Object(i.b)("inlineCode",{parentName:"em"},"withParams")," here matches the ",Object(i.b)("inlineCode",{parentName:"em"},":id")," argument in the ",Object(i.b)("inlineCode",{parentName:"em"},"post")," url")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),'when(post("https://some.url/:id")).thenReturnFor(\n  request(\n    withBody({ foo: "bar" }),\n    withHeaders({ "content-type": "application/json" }),\n    withParams({ id: "expected-id" })\n  ),\n  ok({ response: "success" })\n);\n')),Object(i.b)("p",null,"In the above request, the resolver will only match if the request data matches the request specified."))}l.isMDXComponent=!0},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=a.a.createContext({}),l=function(e){var t=a.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return a.a.createElement(u.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},h=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=l(n),h=r,d=p["".concat(s,".").concat(h)]||p[h]||m[h]||i;return n?a.a.createElement(d,o(o({ref:t},u),{},{components:n})):a.a.createElement(d,o({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=h;var o={};for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var u=2;u<i;u++)s[u]=n[u];return a.a.createElement.apply(null,s)}return a.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);